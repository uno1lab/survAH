<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Two-Sample Comparison of Average Hazard — ah2 • survAH</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Two-Sample Comparison of Average Hazard — ah2"><meta name="description" content="The ah2 function performs two-sample comparisons using the average hazard (AH) as a summary measure of the survival time distribution.
Two kinds of between-group contrast metrics, the ratio of AH (RAH) and the difference in AH (DAH), are calculated."><meta property="og:description" content="The ah2 function performs two-sample comparisons using the average hazard (AH) as a summary measure of the survival time distribution.
Two kinds of between-group contrast metrics, the ratio of AH (RAH) and the difference in AH (DAH), are calculated."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">survAH</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/vignette-survAH.html">Vignette for survAH package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/uno1lab/survAH"><span class="fa fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Two-Sample Comparison of Average Hazard</h1>

      <div class="d-none name"><code>ah2.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>ah2</code> function performs two-sample comparisons using the average hazard (AH) as a summary measure of the survival time distribution.
Two kinds of between-group contrast metrics, the ratio of AH (RAH) and the difference in AH (DAH), are calculated.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ah2</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span>, <span class="va">arm</span>, tau<span class="op">=</span><span class="cn">NULL</span>, conf.int<span class="op">=</span><span class="fl">0.95</span>, eta<span class="op">=</span><span class="fl">0</span>, strata<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p>A numeric vector of follow-up times for right-censored data.</p></dd>


<dt id="arg-status">status<a class="anchor" aria-label="anchor" href="#arg-status"></a></dt>
<dd><p>A numeric vector indicating the event status; 1 = event occurred, 0 = right censored.</p></dd>


<dt id="arg-arm">arm<a class="anchor" aria-label="anchor" href="#arg-arm"></a></dt>
<dd><p>A binary vector indicating group assignment; elements should be either 0 or 1. Typically, 0 = control group and 1 = treatment group.</p></dd>


<dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>A scalar specifying the end time point (<code>tau</code>) for calculating the average hazard. If <code>tau = NULL</code>, the default is the maximum time point at which the risk set size in both groups is at least 10.</p></dd>


<dt id="arg-conf-int">conf.int<a class="anchor" aria-label="anchor" href="#arg-conf-int"></a></dt>
<dd><p>A numeric value specifying the confidence level for confidence intervals. The default is <code>0.95</code>.</p></dd>


<dt id="arg-eta">eta<a class="anchor" aria-label="anchor" href="#arg-eta"></a></dt>
<dd><p>A scalar specifying the start time point (<code>eta</code>) for calculating the average hazard over the time window [eta, tau]. The default is <code>0</code>.</p></dd>


<dt id="arg-strata">strata<a class="anchor" aria-label="anchor" href="#arg-strata"></a></dt>
<dd><p>An optional numeric vector specifying a stratification factor for stratified analysis. If <code>strata = NULL</code> (default), an unstratified analysis is performed.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>ah2</code>, which contains the following components:</p>
<dl><dt>note</dt>
<dd><p>A note indicating the time window used in the analysis, specified as [eta, tau].</p></dd>


<dt>n.obs</dt>
<dd><p>A summary of the number of observations, including the total number, number of events by tau, number of censored observations by tau, and the size of the risk set at tau.</p></dd>


<dt>ah</dt>
<dd><p>Estimated average hazard in each arm.</p></dd>


<dt>rah</dt>
<dd><p>Ratio of average hazards (RAH), calculated as treatment over control.</p></dd>


<dt>dah</dt>
<dd><p>Difference of average hazards (DAH), calculated as treatment minus control.</p></dd>


<dt>conventional_rah</dt>
<dd><p>Ratio of average hazards based on the conventional stratified analysis method.</p></dd>


<dt>conventional_dah</dt>
<dd><p>Difference of average hazards based on the conventional stratified analysis method.</p></dd>


<dt>stratified_ah</dt>
<dd><p>Estimated average hazard by arm based on the proposed stratified analysis method.</p></dd>


<dt>stratified_rah</dt>
<dd><p>Ratio of average hazards based on the proposed stratified analysis method.</p></dd>


<dt>stratified_dah</dt>
<dd><p>Difference of average hazards based on the proposed stratified analysis method.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function provides the AH for each of the two groups, the absolute difference and the absolute ratio of AH (DAH and RAH) between the two groups, and the corresponding confidence intervals.
It also calculates p-values for the two-sided tests based on the RAH and DAH.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Uno H and Horiguchi M. Ratio and difference of average hazard with survival weight: new measures to quantify survival benefit of new therapy. Statistics in Medicine. 2023;1-17. &lt;doi:10.1002/sim.9651&gt;
Horiguchi M, Tian L, Kehl K.L., and Uno H. Assessing delayed treatment benefits of immunotherapy using long-term average hazard: a novel test/estimation approach. &lt;arXiv:2403.10742&gt;
Qian Z, Tian L, Horiguchi M, and Uno H. A novel stratified analysis method for testing and estimating overall treatment effects on time-to-event outcomes using average hazard with survival weight. Statistics in Medicine. 2025. &lt;arXiv:2404.00788&gt;</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Hajime Uno, Miki Horiguchi, Zihan Qian</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#====================================================================</span></span></span>
<span class="r-in"><span><span class="co"># cm214_pfs: The sample reconstructed data of the CheckMate214 study.</span></span></span>
<span class="r-in"><span><span class="co">#====================================================================</span></span></span>
<span class="r-in"><span><span class="co"># The code below reproduces the results reported by</span></span></span>
<span class="r-in"><span><span class="co"># Uno H and Horiguchi M (StatMed; 2023) in Table 6.</span></span></span>
<span class="r-in"><span><span class="va">D</span>      <span class="op">=</span> <span class="va">cm214_pfs</span></span></span>
<span class="r-in"><span><span class="va">time</span>   <span class="op">=</span> <span class="va">D</span><span class="op">$</span><span class="va">time</span></span></span>
<span class="r-in"><span><span class="va">status</span> <span class="op">=</span> <span class="va">D</span><span class="op">$</span><span class="va">status</span></span></span>
<span class="r-in"><span><span class="va">arm</span>    <span class="op">=</span> <span class="va">D</span><span class="op">$</span><span class="va">arm</span></span></span>
<span class="r-in"><span><span class="va">tau</span>    <span class="op">=</span> <span class="fl">21</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">a</span> <span class="op">=</span> <span class="fu">ah2</span><span class="op">(</span>time<span class="op">=</span><span class="va">time</span>, status<span class="op">=</span><span class="va">status</span>, arm<span class="op">=</span><span class="va">arm</span>, tau<span class="op">=</span><span class="va">tau</span>, conf.int<span class="op">=</span><span class="fl">0.95</span>, eta<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">a</span>, digits<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The time window: [eta, tau] = [0, 21] was specified.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of observations: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Total N Event by tau Censor by tau At risk at tau</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> arm0     422          225           163             34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> arm1     425          219           160             46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average Hazard (AH) by arm: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Est. Lower 0.95 Upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AH (arm0) 0.066      0.057      0.076</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AH (arm1) 0.049      0.042      0.057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between-group contrast: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                Est. Lower 0.95 Upper 0.95 P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratio of AH (arm1/arm0)       0.747      0.608      0.917   0.005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Difference of AH (arm1-arm0) -0.017     -0.029     -0.005   0.006</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The code below reproduces the results reported by</span></span></span>
<span class="r-in"><span><span class="co"># Horiguchi M, Tian L, Kehl K.L, Uno H (arXiv; 2024) in Table 3.</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">=</span> <span class="fu">ah2</span><span class="op">(</span>time<span class="op">=</span><span class="va">time</span>, status<span class="op">=</span><span class="va">status</span>, arm<span class="op">=</span><span class="va">arm</span>, tau<span class="op">=</span><span class="fl">21</span>, conf.int<span class="op">=</span><span class="fl">0.95</span>, eta<span class="op">=</span><span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">b</span>, digits<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The time window: [eta, tau] = [7, 21] was specified.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of observations: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Total N Event by tau Censor by tau At risk at tau</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> arm0     171           67            70             34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> arm1     213           61           106             46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Average Hazard (AH) by arm: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Est. Lower 0.95 Upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AH (arm0) 0.051      0.040      0.065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AH (arm1) 0.028      0.022      0.037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Between-group contrast: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                Est. Lower 0.95 Upper 0.95 P-value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ratio of AH (arm1/arm0)       0.553      0.387      0.791   0.001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Difference of AH (arm1-arm0) -0.023     -0.037     -0.008   0.002</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://ds.dfci.harvard.edu/~huno/" class="external-link">Hajime Uno</a>, Miki Horiguchi, Zihan Qian.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

